[% PROCESS plugins/MellowDSP/settings/common.html %]

<div class="prefDesc">
  <input name="enabled" id="enabled" type="checkbox" [% IF enabled %]checked[% END %]>
  <label for="enabled">Enable Mellow-DSP</label>
</div>

<div class="prefDesc">
  <label for="upsample_rate">Upsampling Rate:</label>
  <select name="upsample_rate" id="upsample_rate">
    <option value="44100" [% IF upsample_rate == '44100' %]selected[% END %]>44.1 kHz</option>
    <option value="48000" [% IF upsample_rate == '48000' %]selected[% END %]>48 kHz</option>
    <option value="96000" [% IF upsample_rate == '96000' %]selected[% END %]>96 kHz</option>
    <option value="192000" [% IF upsample_rate == '192000' %]selected[% END %]>192 kHz</option>
    <option value="384000" [% IF upsample_rate == '384000' %]selected[% END %]>384 kHz</option>
    <option value="768000" [% IF upsample_rate == '768000' %]selected[% END %]>768 kHz</option>
  </select>
</div>

<div class="prefDesc">
  <label for="dithering">Dithering:</label>
  <select name="dithering" id="dithering">
    <option value="none" [% IF dithering == 'none' %]selected[% END %]>None</option>
    <option value="triangular" [% IF dithering == 'triangular' %]selected[% END %]>Triangular</option>
    <option value="shaped" [% IF dithering == 'shaped' %]selected[% END %]>Noise Shaped</option>
    <option value="lipshitz" [% IF dithering == 'lipshitz' %]selected[% END %]>Lipshitz</option>
    <option value="fweighted" [% IF dithering == 'fweighted' %]selected[% END %]>F-weighted</option>
    <option value="eweighted" [% IF dithering == 'eweighted' %]selected[% END %]>E-weighted</option>
  </select>
</div>

<div class="prefDesc">
  <label for="fir_file_left">FIR File Left:</label>
  <input type="text" name="fir_file_left" id="fir_file_left" value="[% fir_file_left | html %]" size="40">
  <input type="button" value="Browse..." onclick="browseFile('fir_file_left')">
</div>

<div class="prefDesc">
  <label for="fir_file_right">FIR File Right:</label>
  <input type="text" name="fir_file_right" id="fir_file_right" value="[% fir_file_right | html %]" size="40">
  <input type="button" value="Browse..." onclick="browseFile('fir_file_right')">
</div>

<div class="prefDesc">
  <label for="output_format">Output Format:</label>
  <select name="output_format" id="output_format">
    <option value="wav" [% IF output_format == 'wav' %]selected[% END %]>WAV</option>
    <option value="flac" [% IF output_format == 'flac' %]selected[% END %]>FLAC</option>
  </select>
</div>

<input type="submit" name="saveSettings" value="[% "SAVE" | string %]" class="stdclick">
<input type="submit" name="cancel" value="[% "CANCEL" | string %]" class="stdclick">

<script>
function browseFile(fieldId) {
  var input = document.createElement('input');
  input.type = 'file';
  input.accept = '.wav,.WAV';
  input.onchange = function(e) {
    var file = e.target.files[0];
    if (file) {
      document.getElementById(fieldId).value = file.name;
    }
  };
  input.click();
}
</script>
